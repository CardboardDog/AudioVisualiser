<!DOCTYPE html>
<html>
<head>
  <title>AV 1.014b</title>
</head>
<body id = "main">
  <canvas id = "render" style="width:100%; height:100%; background-size:100%; background-repeat:no-repeat; background-image: url('https://raw.githubusercontent.com/CardboardDog/AudioVisualiser/main/bg.png');"></canvas>
</body>
<script id = "VisualiserScript">
  var all = document.getElementById("main");
  main.style = "background-color:black;";
  var renderElement = document.getElementById("render");
  var render = renderElement.getContext("2D");
  
  const stream = navigator.mediaDevices.getUserMedia({ audio: true, video: false });
  const audioContext = new AudioContext();
  const mediaStreamAudioSourceNode = audioContext.createMediaStreamSource(stream);
  const analyserNode = audioContext.createAnalyser();
  mediaStreamAudioSourceNode.connect(analyserNode);
  const pcmData = new Float32Array(analyserNode.fftSize);
  function onFrame = () => {
      analyserNode.getFloatTimeDomainData(pcmData);
      var sumSquares = 0.0;
      var res = analyserNode[1];
      window.requestAnimationFrame(onFrame);
  };
  window.requestAnimationFrame(onFrame);
</script>
</html>
